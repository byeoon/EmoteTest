function K(t){window.enmity.plugins.registerPlugin(t)}const c=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const o=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const W=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const N=window.enmity.modules.common.Navigation,$=window.enmity.modules.common.NavigationNative,B=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const X=window.enmity.modules.common.Linking,y=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const P={byProps:(...t)=>window.enmity.modules.filters.byProps(...t),byName:(t,n)=>window.enmity.modules.filters.byName(t,n),byTypeName:(t,n)=>window.enmity.modules.filters.byTypeName(t,n),byDisplayName:(t,n)=>window.enmity.modules.filters.byDisplayName(t,n)};function Q(...t){return window.enmity.modules.bulk(...t)}function S(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;function Z(t){return window.enmity.patcher.create(t)}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList;const q=e.Image;e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl;const I=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const l=e.Text;e.TextInput,e.TouchableHighlight;const k=e.TouchableOpacity;e.TouchableWithoutFeedback,e.Touchable;const L=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const O=e.FormRow;e.FormSection,e.FormSelect,e.FormSubLabel;const J=e.FormSwitch;e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;var ee="EmotesPlus",oe="1.0.1",te="Enhanced mobile emote management.",ne=[{name:"byeoon",id:"1167275288036655133"}],ie="#00007d",re="https://github.com/byeoon/EmotesPlus",le=[`
 1.0.0: The actual, first, initial release of EmotesPlus! 
`],f={name:ee,version:oe,description:te,authors:ne,color:ie,sourceUrl:re,changelog:le};function x(t,n,s){return window.enmity.settings.get(t,n,s)}const _=B.createStackNavigator();var se=({name:t="Page",component:n=L}={})=>{const s=y.createThemedStyleSheet({container:{backgroundColor:y.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,flex:.5},card:{backgroundColor:y.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:c.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:y.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},text:{color:y.ThemeColorMap.HEADER_PRIMARY,fontFamily:c.Fonts.PRIMARY_NORMAL,fontSize:16,marginLeft:16,backgroundColor:"transparent"}}),p=({onPress:a,title:w})=>o.createElement(k,{onPress:a},o.createElement(l,{style:s.text},w));return o.createElement($.NavigationContainer,{independent:!0},o.createElement(_.Navigator,{initialRouteName:t,style:s.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:s.card,headerStyle:s.header,headerTitleContainerStyle:{color:c.ThemeColorMap.HEADER_PRIMARY},headerTitleAlign:"center",safeAreaInsets:{top:0}}},o.createElement(_.Screen,{name:t,component:n,options:{headerTitleStyle:{color:"white",fontFamily:c.Fonts.PRIMARY_NORMAL},headerLeft:()=>o.createElement(p,{title:"Cancel",onPress:()=>{N.pop()}}),...B.TransitionPresets.ModalSlideFromBottomIOS}})))};function me(t,n){fetch(t).then(s=>{s.blob().then(p=>{const a=new FileReader;a.readAsDataURL(p),a.onloadend=()=>{n(a.result)}})})}const[ae,ce,de]=Q(P.byProps("getGuilds"),P.byProps("can","_dispatcher"),P.byProps("uploadEmoji"));function z(t,n,s){return window.enmity.utilities.findInReactTree(t,n,s)}function ue(t){return window.enmity.assets.getIDByName(t)}async function pe(){return(await(await fetch("https://raw.githubusercontent.com/byeoon/EmotesPlus/main/version.json")).json()).version}function ye(){const[t,n]=o.useState();return o.useEffect(()=>{pe().then(n)},[]),t}const{default:M}=S("ButtonColors","ButtonSizes");var we=({settings:t})=>{const n=y.createThemedStyleSheet({title:{flexDirection:"column"},itiswhatitis:{flexDirection:"row",justifyContent:"center",alignItems:"center"},pluginTitle:{fontSize:32,paddingTop:20,paddingLeft:20,paddingRight:30,color:c.ThemeColorMap.HEADER_PRIMARY},pluginAuthor:{fontSize:12,paddingLeft:20,paddingRight:30,color:c.ThemeColorMap.HEADER_SECONDARY},br:{fontSize:0,paddingTop:20,paddingLeft:20,paddingRight:30,color:c.ThemeColorMap.HEADER_SECONDARY},img:{width:72,height:72,marginTop:10,marginLeft:20},tab:{fontSize:14,paddingTop:20,paddingLeft:20,paddingRight:25,color:c.ThemeColorMap.HEADER_SECONDARY}});return o.createElement(I,null,o.createElement(L,{style:n.itiswhatitis},o.createElement(q,{source:{uri:"https://avatars.githubusercontent.com/u/47872200?v=4"},style:n.img}),o.createElement(L,{style:n.title},o.createElement(l,{style:n.pluginTitle},"EmotesPlus"),o.createElement(l,{style:n.pluginAuthor},"Developed by byeoon"),o.createElement(l,{style:n.pluginAuthor}," Version ",f.version," | Remote Version: ",ye()),o.createElement(l,{style:n.br}," "))),o.createElement(l,{style:n.tab},"Settings"),o.createElement(O,{label:"Copy Emotes as Hyperlink",trailing:o.createElement(J,{value:t.getBoolean("copyAsHyperlink",!0),onValueChange:()=>t.toggle("copyAsHyperlink",!0)})}),o.createElement(l,{style:n.br}," "),o.createElement(l,{style:n.br}," "),o.createElement(M,{color:M.Colors.BRAND,text:"Visit GitHub Repository",size:M.Sizes.SMALL,onPress:()=>{X.openURL("https://github.com/byeoon/EmotesPlus")}}),o.createElement(l,{style:n.br}," "),o.createElement(l,{style:n.tab},"Changelog: "),o.createElement(l,{style:n.pluginAuthor}," ",f.changelog," "))};const b=S("openLazy","hideActionSheet"),A=S("setString"),d=Z("EmotesPlus"),{default:u}=S("ButtonColors","ButtonSizes");S("RedesignCompat");const ge=c.Permissions;function D(t){W.open({content:t,icon:ue("Check")})}const he={...f,onStart(){console.log("[EmotesPlus] Hello World!");const t=d.before(b,"openLazy",(s,[p,a])=>{a==="MessageEmojiActionSheet"&&(t(),p.then(w=>{d.after(w,"default",(U,H,R)=>{const T=d.after(R,"type",(Y,j,v)=>{o.useEffect(()=>()=>void T(),[]);const g=z(v,i=>{var r,m;return(i==null?void 0:i.type)&&((r=i==null?void 0:i.props)==null?void 0:r.emojiNode)&&((m=i==null?void 0:i.props)==null?void 0:m.nonce)});!g||d.after(g,"type",(i,[{emojiNode:r}],m)=>{var h,E;const V=Object.entries(ae.getGuilds()).filter(([F,C])=>ce.can(ge.MANAGE_GUILD_EXPRESSIONS,C));(E=(h=m==null?void 0:m.props)==null?void 0:h.children)==null||E.push(o.createElement(l,{text:"EmotesPlus"}),o.createElement(u,{color:u.Colors.BRAND,text:"Copy Emote URL",size:u.Sizes.SMALL,onPress:()=>{D("Copied Emote URL to clipboard!"),x(f.name,"copyAsHyperlink",!1)?A.setString(r.src):A.setString("["+r.alt+"]("+r.src+")"),b.hideActionSheet()}}),o.createElement(l,{text:"  "}),o.createElement(u,{color:u.Colors.BRAND,text:"Clone to Server",size:u.Sizes.SMALL,onPress:()=>{N.push(se,{component:()=>o.createElement(I,null,V.map(([F,C])=>o.createElement(k,{onPress:()=>me(r.src,G=>{de.uploadEmoji({guildId:F,image:G,name:r.alt,roles:void 0}).then(()=>{D(`Cloned emote to ${C}!`),N.pop()})})},o.createElement(O,{label:" "+C})))),name:"Clone Emote"}),b.hideActionSheet()}}))})})})}))}),n=d.before(b,"openLazy",(s,[p,a])=>{a==="sticker_detail"&&(n(),p.then(w=>{d.after(w,"default",(U,H,R)=>{const T=d.after(R,"type",(Y,j,v)=>{console.log("[EmotesPlus] "+v),o.useEffect(()=>()=>void T(),[]);const g=z(v,i=>{var r,m;return(i==null?void 0:i.type)&&((r=i==null?void 0:i.props)==null?void 0:r.emojiNode)&&((m=i==null?void 0:i.props)==null?void 0:m.nonce)});!g||d.after(g,"type",(i,[{emojiNode:r}],m)=>{var h,E;(E=(h=m==null?void 0:m.props)==null?void 0:h.children)==null||E.push(o.createElement(l,{text:"EmotesPlus"}),o.createElement(u,{color:u.Colors.BRAND,text:"Copy Sticker URL",size:u.Sizes.SMALL,onPress:()=>{D("Copied Sticker URL to clipboard!"),x(f.name,"copyAsHyperlink",!1)?A.setString(r.src):A.setString("["+r.alt+"]("+r.src+")"),b.hideActionSheet()}}),o.createElement(l,{text:"  "}))})})})}))})},onStop(){d.unpatchAll()},getSettingsPanel({settings:t}){return o.createElement(we,{settings:t})}};K(he);
